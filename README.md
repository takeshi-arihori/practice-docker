# practice-docker

実践 Docker - ソフトウェアエンジニアの「Docker よくわからない」で学習した内容

## サーバ仮想化とは

コンピュータのリソースを管理するための様々な技術。例えば 1 台のサーバの中にネットワークやストレージを仮想的に用意して、複数の異なるサーバが動いているように見せかけたりする技術。

### 仮想化の種類

#### ホスト型仮想化: VirtualBox などのようにホスト OS にインストールされ、ゲスト OS を管理

**特徴**:

- すでに使っているマシンに仮想サーバを構築する場合などに有用。
- ホスト OS があるのでブラウザやエディタも普通に使い続けられる。

#### ハイパーバイザー型仮想化: ハードウェアにインストールされ、ゲスト OS を管理

**特徴**:

- ホスト OS の起動をまったりリソースを割り当てたりしなくていい
- ゲスト OS 以外は動かせない
  ※ Microsoft Hyper-V や Linux の KVM など

#### コンテナ型仮想化: ホスト OS にインストールされ、アプリケーションを管理

**特徴**:

- ゲスト OS が存在しないので、起動のコストが大幅に少ない
- サーバではないので、1 つのコンテナに複数のアプリケーションをインストールしない
- ホスト OS があるのでブラウザやエディタも普通に使い続けられる

### コンテナ型仮想環境のメリット

- 起動が早い
- デプロイしやすい
  デプロイ先がイメージレジストリやマネージドなコンテナのデプロイ先があるので、本番稼働もローカル環境もコンテナ型仮想化を前提として構築することが多い。
  コンテナ方仮想化は機能ごとにコンテナを起動するため、不要な設定が混入することを避けられる。

### ホスト OS の違いがコンテナに影響する

**原因**: Linux カーネルの違いによるもの
Linux のカーネルはホスト OS と同じものをインストールするため、結果的にホスト OS が違うと起動するコンテナも違うものになる。
※コンテナは必ずしもホスト OS の影響を完全に受けないわけではない。


## Dockerとは
- **Docker Engine**:
コンテナ型仮想化ソフトウェアのことで、これによりアプリケーションをソフトウェアとして扱うことができる。
DockerのコンテナはLinuxのカーネルと機能を使用しているため、Docker EngineはLinux上でしか動かない。
- **Docker CLI**: Dockerに命令をするコマンド
- **Docker Desktop**: Docker EngineやLinuxカーネルが含まれているため、Linux以外のOSからでもDocker Engineを動かすことができる。
- **Docker Compose**: Docker CLIをまとめて実行してくれる便利なツール。
- **Docker Hub**: DockerのイメージレジストリであるSaasサービス。
- **ECS/GKE**: コンテナ管理サービス。Docker Engineの入ったLinuxのことで、ローカル開発に使ったコンテナをそのままデプロイできる場所のこと。
- **ECR/GCR**: 非公開のイメージレジストリ。プライベートなDocker Hubのことで、「商用サービスのイメージをDocker Hubで公開したくないけど、レジストリに登録しないとデプロイできない」場合に使用される。
- **Kubernetes**: 多数のコンテナを管理するオーケストレーションソフトウェア。ロードバランサーの作成や、アクセス集中時のスケーリングなどが簡単に実現できる

## Dockerを理解
### コンテナ
特定のコマンドを実行するために作られるホストマシン上の隔離された領域。
コンテナの実体はLinuxのnamespaceという機能により他と分離されたただの1プロセス。そのプロセスをコンテナやイメージというものを用いて扱いやすくした技術がDocker。
